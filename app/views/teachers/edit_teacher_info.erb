<div class="container">
  <div class="panel panel-default">
    <div class="panel-body">
      <legend>학습 프로필</legend>
      <%= form_for :teacher_info, url: update_teacher_info_path, html: {id: "edit_form"} do |f| %>
        <!-- location 우선 제거, 필요 시 개인 프로필에 추가
        <div class="col-md-2" align="center">
          <%#= f.label :location, "Location", class: "control-label" %>
        </div>
        <div class="col-md-10">
          <%#= f.text_field :location, :autocomplete => :off, class: "col-md-12 form-control" %>
        </div>
        -->
        
        <!-- 줄바꿈용 div 우선 제거
        <div class="col-md-12" style="height: 10px"></div>
        -->
        
        <!-- major 제거
        <div class="col-md-2" align="center">
          <%#= f.label :major, "Major", class: "control-label" %>
        </div>
        <div class="col-md-4">
          <%#= f.text_field :major, :autocomplete => :off, class: "col-md-12 form-control" %>
        </div>
        -->
        
        <!-- University 제거
        <div class="col-md-2" align="center">
          <%#= f.label :school_grad, "University graduated", class: "control-label" %>
        </div>
        <div class="col-md-4">
          <%#= f.text_field :school_grad, :autocomplete => :off, class: "col-md-12 form-control" %>
        </div>
        -->
        
        <!-- 줄바꿈용 div 우선 제거
        <div class="col-md-12" style="height: 10px"></div>
        -->
        
        <div class="form-group">
          <%= f.label :lecture_price, "강의료 설정", class: "col-md-2 control-label" %>
          <div class="col-md-10">
            <%= f.text_area :lecture_price, :autocomplete => :off, :placeholder => "10코인 이하로 설정해주세요.", class: "form-control", rows: "1" %>
          </div>
        </div>  
        <div class="col-md-12" style="height:10px"></div>
        
        <div class="form-group">
          <%= f.label :skype_id, "스카이프 아이디", class: "col-md-2 control-label" %>
          <div class="col-md-10">
            <%= f.text_area :skype_id, autocomplete: "off", :placeholder => "스카이프 아이디", class: "form-control", rows: "1" %>
          </div>
        </div>
        <div class="col-md-12" style="height:10px"></div>
        
        <div class="form-group">
          <%= f.label :brief_introduction, "짧은 소개글", class: "col-md-2 control-label" %>
          <div class="col-md-10">
            <%= f.text_area :brief_introduction, :autocomplete => :off, :placeholder => "간단하게 자신을 소개해주세요. 선생님 검색 목록에 표시되는 소개글입니다.", class: "col-md-12 form-control", rows: "2" %>
          </div>
        </div>
        <div class="col-md-12" style="height:10px"></div>
        
        <div class="form-group">
          <%= f.label :introduction, "긴 소개글", class: "col-md-2 control-label" %>
          <div class="col-md-10">
            <%= f.text_area :introduction, :autocomplete => :off, :placeholder => "강사로서의 장점, 강사로서의 경험, 강의 방식 등을 자세히 소개해 주세요. 강사 페이지에 표시되는 소개글입니다.", class: "col-md-12 form-control", rows: "15" %>
          </div>
        </div>
        <div class="col-md-12" style="height:10px"></div>
        
        <div class="form-group">
          <label class="col-md-2 control-label" style="padding-top:25px">강의시간표 설정</label>
          <div class="col-md-3">
            &nbsp
            <select name="week-day" class="form-control">
              <% ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'].each do |item| %>
                <option value="<%= item %>"><%= item %></option>
              <% end %>
            </select>
          </div>
          <div class="col-md-3">
            시작 시간
            <input name="start-time" type="time" class="form-control"> 
          </div>
          <div class="col-md-3">
            종료 시간
            <input name="end-time" type="time" class="form-control">
          </div>
          <div class="col-md-1">
            &nbsp
            <button id="schedule_add_btn" type="button" class="btn btn-default" style="width: 100%;" disabled="disabled"> + </button>
          </div>
          <div class="col-md-10 col-md-offset-2">강의 신청을 받을 수 있는 시간대를 요일별로 설정해주세요.</div>
          <div class="col-md-10 col-md-offset-2" id="schedule_list">
          </div>
          <input type="hidden" name="schedules" id="schedules">
          
          <div class="col-md-10 col-md-offset-2" style="margin-bottom: 4rem;">
            <%= f.submit "완료", class: "col-md-3 btn btn-primary" %>
          </div>
        </div>

      <% end %>
    </div>
  </div>
</div>

<script src="/assets/mySchedule.js"></script>
<script type="text/javascript">
  my_schd = new Teacher_Schedule('<%= current_user.get_schedule %>');
  $(document).ready(function(){
    show_schedules($('#schedule_list'), my_schd);

    $('input[name="start-time"]').keyup(function(){
      check_add_btn();
    });

    $('input[name="end-time"]').keyup(function(){
      check_add_btn();
    });

    $('#schedule_add_btn').click(function(){
      $(this).attr('disabled',true);
      my_schd.push_schedule($('select[name="week-day"]').val(), $('input[name="start-time"]').val(), $('input[name="end-time"]').val())
      $('input[name="start-time"]').val('');
      $('input[name="end-time"]').val('');
      show_schedules($('#schedule_list'), my_schd);
    });

    $(document).on('click', '.schedule_delete_btn', function(){
      if(confirm('Are U sure?')){
        my_schd.delete_schedule($(this).data('schedule'));
        show_schedules($('#schedule_list'), my_schd);
      };
    });

    $('#edit_form').submit(function(e){
      $('#schedules').val(my_schd.get_schedule().join(','));
    });

  });
</script>
